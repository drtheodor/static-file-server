---
const { gid } = Astro.props;

const analyticsId = gid.startsWith("G-") ? gid : `G-${gid}`;

/* 
 * The next script is an edited version of https://gist.github.com/idarek/9ade69ac2a2ef00d98ab950426af5791 
 * The only thing changed is the added support of `data-gid`.
 */
---

<script lang="js" data-gid={analyticsId}>enScroll=!1,enFdl=!1,extCurrent=void 0,filename=void 0,targetText=void 0,splitOrigin=void 0;const lStor=localStorage,sStor=sessionStorage,doc=document,docEl=document.documentElement,docBody=document.body,docLoc=document.location,w=window,s=screen,nav=navigator||{},trackingId=doc.currentScript.dataset.gid,extensions=["pdf","xls","xlsx","doc","docx","txt","rtf","csv","exe","key","pps","ppt","pptx","7z","pkg","rar","gz","zip","avi","mov","mp4","mpe","mpeg","wmv","mid","midi","mp3","wav","wma"];function a(e,t,o,r){const n=()=>Math.floor(1e9*Math.random())+1,i=()=>Math.floor(Date.now()/1e3),c=lStor.getItem("cid_v4"),d=docLoc.search,l=new URLSearchParams(d),a=["q","s","search","query","keyword"],p=a.some((e=>d.includes("&"+e+"=")||d.includes("?"+e+"="))),v=()=>1==p?"view_search_results":1==enScroll?"scroll":1==enFdl?"file_download":"page_view",u=encodeURIComponent,g="https://www.google-analytics.com/g/collect?"+(e=>{let t=[];for(let o in e)e.hasOwnProperty(o)&&void 0!==e[o]&&t.push(u(o)+"="+u(e[o]));return t.join("&")})({v:"2",tid:trackingId,_p:(sStor._p||(sStor._p=n()),sStor._p),sr:(s.width*w.devicePixelRatio+"x"+s.height*w.devicePixelRatio).toString(),ul:(nav.language||void 0).toLowerCase(),cid:(lStor.cid_v4||(lStor.cid_v4=n()+"."+i()),lStor.cid_v4),_fv:c||1==enScroll?void 0:"1",_s:"1",dl:docLoc.origin+docLoc.pathname+d,dt:doc.title||void 0,dr:doc.referrer||void 0,sid:(sStor.sid||(sStor.sid=i()),sStor.sid),sct:(()=>{if(sStor.sct){if(1==enScroll)return sStor.sct;x=+sStor.getItem("sct")+1,sStor.sct=x}else sStor.sct="1";return sStor.sct})(),seg:"1",en:v(),"epn.percent_scrolled":1==enScroll?"90":void 0,"ep.search_term":(()=>{if("view_search_results"==v())for(let e of l)if(a.includes(e[0]))return e[1]})(),"ep.file_extension":e||void 0,"ep.file_name":t||void 0,"ep.link_text":o||void 0,"ep.link_url":r||void 0,_ss:(()=>{if(!sStor._ss)return sStor._ss="1",sStor._ss;sStor.getItem("_ss")})(),_dbg:void 0});if(nav.sendBeacon)nav.sendBeacon(g);else{(new XMLHttpRequest).open("POST",g,!0)}}function sPr(){return(docEl.scrollTop||docBody.scrollTop)/((docEl.scrollHeight||docBody.scrollHeight)-docEl.clientHeight)*100}function sEv(){sPr()<90||(enScroll=!0,a(),doc.removeEventListener("scroll",sEv,{passive:!0}),enScroll=!1)}function fDl(e){enFdl=!0;const t=e.currentTarget.getAttribute("href"),o=t.substring(t.lastIndexOf("/")+1),s=o.split(".").pop();a(s,o.replace("."+s,""),e.currentTarget.text,t.replace(docLoc.origin,"")),enFdl=!1}a(),doc.addEventListener("scroll",sEv,{passive:!0}),document.addEventListener("DOMContentLoaded",(function(){let e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++)if(null!=e[t].getAttribute("href")){const o=e[t].getAttribute("href"),s=o.substring(o.lastIndexOf("/")+1).split(".").pop();(e[t].hasAttribute("download")||extensions.includes(s))&&e[t].addEventListener("click",fDl,{passive:!0})}}));</script>